<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js - element</title>
</head>
<body>
    <h1>Get Element</h1>
    <ul>
        <li id="myli1" class="group">요소1</li>
        <li id="myli2">요소2</li>
        <li id="myli3" class="group">요소3</li>
        <li id="myli4">요소4</li>
        <li id="myli5" class="group">요소5</li>
    </ul>
    <input type="button" value="id" onclick="test1();">
    <input type="button" value="tag name" onclick="test2();">
    <input type="button" value="class" onclick="test3();">
    <script>

        /* document객체 : 작성한 html5의 태그를 파싱해서, 변환된 js Object를 가지고 있는 객체 
           DOM(Document Object Model)
        */

        function test1() {
            var li = document.getElementById("myli1"); //myli1이라는 태그를 찾아서 객체로 리턴
            //존재하지않는객체 : null 
            console.log(li); //태그객체 
            console.dir(li); //객체구조로 열람
            //스타일 속성 변경
            li.style.color = 'red';
            li.style.backgroundColor = "lightblue"; //background-color아님 주의!
        }

        function test2() {
            // getElementsByTagName는 복수개의 요소를 가진 배열객체(가짜)를 리턴한다
            var liArr = document.getElementsByTagName("li");
            console.log(liArr);
            // console.log(liArr[0]);
            // console.log(liArr[1]);
            // console.log(liArr[2]);
            // console.log(liArr[3]);
            // console.log(liArr[4]);
            for(var i = 0; i < liArr.length; i++){
                console.log(liArr[i]);
            }

        /*    
            var b = 50;
            for(var i = 0; i < liArr.length; i++){
                console.log(liArr[i]);
                liArr[i].style.color = "rgb(130, 220, " + b + ")"; //그라데이션
                b += 50;
            }
        */
       
        }
        /* document.getElementsByClassName("클래스명") */
        function test3() {
            var groups = document.getElementsByClassName("group");
            // console.log(groups);

            for(var i = 0; i < groups.length; i++){
                var li = groups[i];
                console.log(li);
                li.style.color = "green";
            }
        }
        
    
    
    </script>
    

    <fieldset style="margin-top: 30px;">
        <legend>취미</legend>
        <!-- (input:checkbox[name=hobby][value]#hobby$+label[for=hobby$])*3 -->
        <input type="checkbox" name="hobby" id="hobby1" value="음악감상">
        <label for="hobby1">음악감상</label>
        <input type="checkbox" name="hobby" id="hobby2" value="영화시청">
        <label for="hobby2">영화시청</label>
        <input type="checkbox" name="hobby" id="hobby3" value="게임">
        <label for="hobby3">게임</label>
        <br>
        <input type="button" value="name" onclick="test4();">
    </fieldset>
    <script>
        function test4() {
            var hobbies = document.getElementsByName("hobby");
            //console.log(hobbies);

            for(var i = 0; i < hobbies.length; i++){
                var hobby = hobbies[i];
                //체크여부
                if(hobby.checked) {
                    console.log(hobby.value); //input태그의 value속성값을 가져온다
                }
            }
        }
    </script>


    <fieldset style="margin-top: 20px;">
        <legend>이메일 입력</legend>
        <input type="email" name="userEmail" id="userEmail" placeholder="이메일을 입력하세요">
        <input type="button" value="확인" onclick="test5();">
    </fieldset>
    <script>
        /** 
         * #userEmail을 입력하고 확인을 눌렀을때 사용자 입력값을 경고창에 출력하세요
         * 아이디로 접근
         * 태그명으로 접근
         * name값으로 접근
         */
        function test5() {
            var email = document.getElementById("userEmail");
            //console.log(email.value);
            //alert(email.value);
            var email2 = document.getElementsByName("userEmail");
            console.log(email2[0].value); //getter
            // for(var i = 0; i < email2.length; i++){
            //     console.log(email2[i].value);
            // }
            var email3 = document.getElementsByTagName("input"); //input태그를 모두 가져옴
            //console.log(email3); 
            //console.log(email3[7].value);//해당 값이 7번지에있음
            
            //속성은 getter/setter처리가 가능하다
            email2[0].value = "ㅋㅋㅋ"; //setter
            email2[0].value = ''; //초기화

        }
    </script>

    <fieldset style="margin-top: 20px;">
        <legend>수량</legend>
        <input type="range" name="amount" id="amount" min="1" max="100" oninput="test6();"/>
         <!-- 슬라이드바를 움직이는것이 입력값을 주는것 -->
        <span id="result"></span>
    </fieldset>    
    <script>
        function test6() {
            // var amount = document.getElementById("amount");
            // var result = document.getElementById("result");
            
            //id속성(1페이지에 1개)으로 변수 선언없이 태그객체에 접근가능(비표준)
            //시작태그/종료태그사이 내용으로 추가
            result.innerHTML = amount.value;
            

        }
    </script>


    <table>
        <tr>
            <th colspan="3">수강신청</th>
        </tr>
        <tr>
            <td colspan="3">
                <input type="checkbox" id="checkAll" onchange="test7();"> <!-- onclick과 같다-->
                <label for="checkAll">모두 선택/해제</label>
            </td>
        </tr>

        <tr>
            <td class="serious">
                <!-- input:checkbox[name=subject]#subject0+label[for=subject0] -->
                <!-- (this용법1)태그 inline이벤트 속성에 명시된 this는 태그객체 자신을 가리킨다-->
                <input type="checkbox" name="subject" id="subject0" onclick="test8(this)">
                <label for="subject0">국어</label>
            </td>
            <td class="serious">
                <input type="checkbox" name="subject" id="subject1" onclick="test8(this)">
                <label for="subject1">영어</label>
            </td>
            <td class="serious">
                <input type="checkbox" name="subject" id="subject2" onclick="test8(this)">
                <label for="subject2">수학</label>
            </td>
        </tr>
    </table>
    
    <script>
        /**
         * [name=subject]를 전체선택/해제
         * 
         * css선택자로 요소접근하기
         * - document.querySelector(선택자) : 선택자와 일치하는 하나의 요소를 리턴
         * - document.querySelectorAll(선택자) : 선택자와 일치하는 모든요소를 유사배열로 리턴
         */
        function test7() {
            // var subjects = document.getElementsByName("subject");
            // console.log(subjects);
            
             var subjects = document.querySelectorAll("[name=subject]");
            // var subjects = document.querySelectorAll("[name=subject]:checked"); //체크된것만 확인
             console.log(subjects);
             var checkAll = document.querySelector("#checkAll");
             console.log(checkAll);
            
            for(var i = 0; i < subjects.length; i++) {
                //setter로 checked이용 : #checkAll의 checked여부(true | false)를 세팅
                console.log(checkAll.checked);
                subjects[i].checked = checkAll.checked; //checkAll이 체크되있다면 모두 체크 아니면 체크해제
                /*
                    toggle로 했을때
                    checkAll.checked ? 
                    subjects[i].parentNode.classList.add("on") : 
                    subjects[i].parentNode.classList.remove("on");
                */
            }
        }

        // 개별체크박스를 통해 전체선택 체크박스 제어하기
        function test8(chk) {
            var subjects = document.querySelectorAll("[name=subject]");
            //console.log(subjects);
            var checkedSubjects = document.querySelectorAll("[name=subject]:checked");
            //console.log(checkedSubjects);
            //길이가 같으면(3개다 체크) 전체선택 체크
            checkAll.checked = (subjects.length == checkedSubjects.length); 


            //다른 방법
            /*
            var subjects = document.querySelectorAll("[name=subject]");
            for(var i = 0; i < subjects.length; i++){
                if(!subjects[i].checked){ //하나라도 체크해제되있다면
                    checkAll.checked = false; //전체선택/해제 체크해제
                    return; //조기리턴
                }
            }
            checkAll.checked = true;
            */

            //부모 td태그의 class값 제어
            //console.log(chk); //this로 던져진 태그객체
            //console.dir(chk); 

            var parentTd = chk.parentNode; //chk의 부모태그(td)를 찾아 리턴
            //console.log(parentTd);
            
            //태그객체의 classList속성을 통해서 다음 코드를 개선하라
            //classList
            //toggle로 했을때 parenTd.classList.toggle("on");
            //classList.replace(oldclass,newclass) : oldclass를 newclass로 교체
            if(chk.checked) {
                //parentTd.className = "on"; //td태그의 class="on"으로 세팅
                parentTd.classList.add("on");
                //parentTd.className = "on serious";//기존 class값이 제거되지 않도록 처리
            }else {
                //parentTd.className = ""; //td태그의 class값 리셋
                parentTd.classList.remove("on");
                //parentTd.className = "serious";//기존 class값이 제거되지 않도록 처리
            }





        }
    </script>
    
    <style>
        table {
            border: 1px solid black;
            border-collapse: collapse;
            margin: 30px 0;
        }

        th,td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }

        td.on {
            background-color: coral;
            color: white;
        }

        td.serious {
            font-family: "궁서", cursive;
        }
    </style>

</body>
</html>